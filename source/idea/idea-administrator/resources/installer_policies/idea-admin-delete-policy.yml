Version: '2012-10-17'
Statement:
  - Sid: DeletePermissionsIfIDEAInstallFails
    Effect: Allow
    Action:
      - sns:DeleteTopic
      - sns:Unsubscribe
      - backup:DeleteBackupPlan
      - backup:DeleteBackupSelection
      - backup:DeleteBackupVault
      - cloudformation:DeleteChangeSet
      - cloudformation:DeleteStack
      - cloudwatch:DeleteAlarms
      - cloudwatch:DescribeAlarms
      - ds:DeleteDirectory
      - ec2:DeleteFlowLogs
      - ec2:DeleteInternetGateway
      - ec2:DeleteNatGateway
      - ec2:DeleteNetworkInterface
      - ec2:DeleteRoute
      - ec2:DeleteRouteTable
      - ec2:DeleteSecurityGroup
      - ec2:DeleteSubnet
      - ec2:DeleteVpc
      - ec2:DeleteVpcEndpoints
      - ec2:DescribeVpcEndpoints
      - ec2:DescribeManagedPrefixLists
      - ec2:DescribeInstanceAttribute
      - ec2:DescribeTags
      - ec2:DetachInternetGateway
      - ec2:DisassociateAddress
      - ec2:DisassociateRouteTable
      - ec2:ReleaseAddress
      - ec2:RevokeSecurityGroupIngress
      - ec2:TerminateInstances
      - ec2:ModifyInstanceAttribute
      - ecr:DeleteRepository
      - elasticfilesystem:DeleteFileSystem
      - elasticfilesystem:DeleteMountTarget
      - elasticloadbalancing:DeRegisterTargets
      - elasticloadbalancing:DeleteListener
      - elasticloadbalancing:DeleteLoadBalancer
      - elasticloadbalancing:DeleteRule
      - es:DeleteElasticsearchDomain
      - fsx:DeleteFileSystem
      - iam:DeleteInstanceProfile
      - iam:DeleteRole
      - iam:DeleteRolePolicy
      - iam:DeleteServiceLinkedRole
      - iam:DetachRolePolicy
      - iam:RemoveRoleFromInstanceProfile
      - kinesis:DeleteStream
      - lambda:ListFunctions
      - lambda:ListTags
      - lambda:UpdateFunctionConfiguration
      - lambda:DeleteFunction
      - lambda:RemovePermission
      - logs:DescribeLogGroups
      - logs:DeleteLogGroup
      - route53resolver:DeleteResolverEndpoint
      - route53resolver:DeleteResolverRule
      - route53resolver:DisassociateResolverRule
      - secretsmanager:DeleteSecret
      - s3:DeleteBucketPolicy
      - s3:DeleteBucket
      - s3:ListAllMyBuckets
      - s3:ListBucketVersions
      - route53:DeleteHostedZone
      - acm:DescribeCertificate
      - acm:ListCertificates
      - acm:RequestCertificate
      - tag:GetResources
    Resource: '*'
